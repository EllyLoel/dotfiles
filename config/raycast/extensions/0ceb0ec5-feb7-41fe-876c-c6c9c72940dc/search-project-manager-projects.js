"use strict";var Ie=Object.create;var _=Object.defineProperty;var ke=Object.getOwnPropertyDescriptor;var De=Object.getOwnPropertyNames;var qe=Object.getPrototypeOf,$e=Object.prototype.hasOwnProperty;var g=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Re=(e,t)=>{for(var r in t)_(e,r,{get:t[r],enumerable:!0})},X=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of De(t))!$e.call(e,o)&&o!==r&&_(e,o,{get:()=>t[o],enumerable:!(n=ke(t,o))||n.enumerable});return e};var C=(e,t,r)=>(r=e!=null?Ie(qe(e)):{},X(t||!e||!e.__esModule?_(r,"default",{value:e,enumerable:!0}):r,e)),Me=e=>X(_({},"__esModule",{value:!0}),e);var k=g((yt,Q)=>{"use strict";var U=require("fs"),I;function We(){try{return U.statSync("/.dockerenv"),!0}catch{return!1}}function Be(){try{return U.readFileSync("/proc/self/cgroup","utf8").includes("docker")}catch{return!1}}Q.exports=()=>(I===void 0&&(I=We()||Be()),I)});var Z=g((Pt,D)=>{"use strict";var Ge=require("os"),Ne=require("fs"),Y=k(),H=()=>{if(process.platform!=="linux")return!1;if(Ge.release().toLowerCase().includes("microsoft"))return!Y();try{return Ne.readFileSync("/proc/version","utf8").toLowerCase().includes("microsoft")?!Y():!1}catch{return!1}};process.env.__IS_WSL_TEST__?D.exports=H:D.exports=H()});var te=g((wt,ee)=>{"use strict";ee.exports=(e,t,r)=>{let n=o=>Object.defineProperty(e,t,{value:o,enumerable:!0,writable:!0});return Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get(){let o=r();return n(o),o},set(o){n(o)}}),e}});var ae=g((jt,ce)=>{var Ve=require("path"),Ke=require("child_process"),{promises:q,constants:se}=require("fs"),v=Z(),ze=k(),$=te(),re=Ve.join(__dirname,"xdg-open"),{platform:P,arch:ne}=process,Je=(()=>{let e="/mnt/",t;return async function(){if(t)return t;let r="/etc/wsl.conf",n=!1;try{await q.access(r,se.F_OK),n=!0}catch{}if(!n)return e;let o=await q.readFile(r,{encoding:"utf8"}),i=/(?<!#.*)root\s*=\s*(?<mountPoint>.*)/g.exec(o);return i?(t=i.groups.mountPoint.trim(),t=t.endsWith("/")?t:`${t}/`,t):e}})(),oe=async(e,t)=>{let r;for(let n of e)try{return await t(n)}catch(o){r=o}throw r},O=async e=>{if(e={wait:!1,background:!1,newInstance:!1,allowNonzeroExitCode:!1,...e},Array.isArray(e.app))return oe(e.app,l=>O({...e,app:l}));let{name:t,arguments:r=[]}=e.app||{};if(r=[...r],Array.isArray(t))return oe(t,l=>O({...e,app:{name:l,arguments:r}}));let n,o=[],i={};if(P==="darwin")n="open",e.wait&&o.push("--wait-apps"),e.background&&o.push("--background"),e.newInstance&&o.push("--new"),t&&o.push("-a",t);else if(P==="win32"||v&&!ze()){let l=await Je();n=v?`${l}c/Windows/System32/WindowsPowerShell/v1.0/powershell.exe`:`${process.env.SYSTEMROOT}\\System32\\WindowsPowerShell\\v1.0\\powershell`,o.push("-NoProfile","-NonInteractive","\u2013ExecutionPolicy","Bypass","-EncodedCommand"),v||(i.windowsVerbatimArguments=!0);let a=["Start"];e.wait&&a.push("-Wait"),t?(a.push(`"\`"${t}\`""`,"-ArgumentList"),e.target&&r.unshift(e.target)):e.target&&a.push(`"${e.target}"`),r.length>0&&(r=r.map(p=>`"\`"${p}\`""`),a.push(r.join(","))),e.target=Buffer.from(a.join(" "),"utf16le").toString("base64")}else{if(t)n=t;else{let l=!__dirname||__dirname==="/",a=!1;try{await q.access(re,se.X_OK),a=!0}catch{}n=process.versions.electron||P==="android"||l||!a?"xdg-open":re}r.length>0&&o.push(...r),e.wait||(i.stdio="ignore",i.detached=!0)}e.target&&o.push(e.target),P==="darwin"&&r.length>0&&o.push("--args",...r);let s=Ke.spawn(n,o,i);return e.wait?new Promise((l,a)=>{s.once("error",a),s.once("close",p=>{if(e.allowNonzeroExitCode&&p>0){a(new Error(`Exited with code ${p}`));return}l(s)})}):(s.unref(),s)},R=(e,t)=>{if(typeof e!="string")throw new TypeError("Expected a `target`");return O({...t,target:e})},Xe=(e,t)=>{if(typeof e!="string")throw new TypeError("Expected a `name`");let{arguments:r=[]}=t||{};if(r!=null&&!Array.isArray(r))throw new TypeError("Expected `appArguments` as Array type");return O({...t,app:{name:e,arguments:r}})};function ie(e){if(typeof e=="string"||Array.isArray(e))return e;let{[ne]:t}=e;if(!t)throw new Error(`${ne} is not supported`);return t}function M({[P]:e},{wsl:t}){if(t&&v)return ie(t);if(!e)throw new Error(`${P} is not supported`);return ie(e)}var T={};$(T,"chrome",()=>M({darwin:"google chrome",win32:"chrome",linux:["google-chrome","google-chrome-stable","chromium"]},{wsl:{ia32:"/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe",x64:["/mnt/c/Program Files/Google/Chrome/Application/chrome.exe","/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe"]}}));$(T,"firefox",()=>M({darwin:"firefox",win32:"C:\\Program Files\\Mozilla Firefox\\firefox.exe",linux:"firefox"},{wsl:"/mnt/c/Program Files/Mozilla Firefox/firefox.exe"}));$(T,"edge",()=>M({darwin:"microsoft edge",win32:"msedge",linux:["microsoft-edge","microsoft-edge-dev"]},{wsl:"/mnt/c/Program Files (x86)/Microsoft/Edge/Application/msedge.exe"}));R.apps=T;R.openApp=Xe;ce.exports=R});var pe=g(y=>{y.parse=y.decode=Ue;y.stringify=y.encode=le;y.safe=w;y.unsafe=b;var W=typeof process<"u"&&process.platform==="win32"?`\r
`:`
`;function le(e,t){var r=[],n="";typeof t=="string"?t={section:t,whitespace:!1}:(t=t||{},t.whitespace=t.whitespace===!0);var o=t.whitespace?" = ":"=";return Object.keys(e).forEach(function(i,s,l){var a=e[i];a&&Array.isArray(a)?a.forEach(function(p){n+=w(i+"[]")+o+w(p)+`
`}):a&&typeof a=="object"?r.push(i):n+=w(i)+o+w(a)+W}),t.section&&n.length&&(n="["+w(t.section)+"]"+W+n),r.forEach(function(i,s,l){var a=ue(i).join("\\."),p=(t.section?t.section+".":"")+a,f=le(e[i],{section:p,whitespace:t.whitespace});n.length&&f.length&&(n+=W),n+=f}),n}function ue(e){return e.replace(/\1/g,"LITERAL\\1LITERAL").replace(/\\\./g,"").split(/\./).map(function(t){return t.replace(/\1/g,"\\.").replace(/\2LITERAL\\1LITERAL\2/g,"")})}function Ue(e){var t={},r=t,n=null,o=/^\[([^\]]*)\]$|^([^=]+)(=(.*))?$/i,i=e.split(/[\r\n]+/g);return i.forEach(function(s,l,a){if(!(!s||s.match(/^\s*[;#]/))){var p=s.match(o);if(!!p){if(p[1]!==void 0){if(n=b(p[1]),n==="__proto__"){r={};return}r=t[n]=t[n]||{};return}var f=b(p[2]);if(f!=="__proto__"){var h=p[3]?b(p[4]):!0;switch(h){case"true":case"false":case"null":h=JSON.parse(h)}if(f.length>2&&f.slice(-2)==="[]"){if(f=f.substring(0,f.length-2),f==="__proto__")return;r[f]?Array.isArray(r[f])||(r[f]=[r[f]]):r[f]=[]}Array.isArray(r[f])?r[f].push(h):r[f]=h}}}}),Object.keys(t).filter(function(s,l,a){if(!t[s]||typeof t[s]!="object"||Array.isArray(t[s]))return!1;var p=ue(s),f=t,h=p.pop(),J=h.replace(/\\\./g,".");return p.forEach(function(S,mt,ht){S!=="__proto__"&&((!f[S]||typeof f[S]!="object")&&(f[S]={}),f=f[S])}),f===t&&J===h?!1:(f[J]=t[s],!0)}).forEach(function(s,l,a){delete t[s]}),t}function fe(e){return e.charAt(0)==='"'&&e.slice(-1)==='"'||e.charAt(0)==="'"&&e.slice(-1)==="'"}function w(e){return typeof e!="string"||e.match(/[=\r\n]/)||e.match(/^\[/)||e.length>1&&fe(e)||e!==e.trim()?JSON.stringify(e):e.replace(/;/g,"\\;").replace(/#/g,"\\#")}function b(e,t){if(e=(e||"").trim(),fe(e)){e.charAt(0)==="'"&&(e=e.substr(1,e.length-2));try{e=JSON.parse(e)}catch{}}else{for(var r=!1,n="",o=0,i=e.length;o<i;o++){var s=e.charAt(o);if(r)"\\;#".indexOf(s)!==-1?n+=s:n+="\\"+s,r=!1;else{if(";#".indexOf(s)!==-1)break;s==="\\"?r=!0:n+=s}}return r&&(n+="\\"),n.trim()}return e}});var ge=g((St,he)=>{"use strict";var de=require("fs"),me=require("os"),B=require("path");he.exports=function(e,t){typeof e!="string"&&(t=e,e=null);let r=Object.assign({cwd:process.cwd(),type:e},t),n;if(r.type==="global"?n=B.join(me.homedir(),".gitconfig"):n=B.resolve(r.cwd,".git/config"),!de.existsSync(n)){if(typeof r.type=="string")return null;n=B.join(me.homedir(),".config/git/config")}return de.existsSync(n)?n:null}});var Se=g((xt,Ee)=>{"use strict";var x=require("fs"),Qe=require("os"),j=require("path"),ye=require("util"),Ye=pe(),He=ge(),Pe=e=>e?e.replace(/^~/,Qe.homedir()):"",d=(e,t)=>(typeof e=="function"&&(t=e,e=null),typeof t!="function"?d.promise(e):d.promise(e).then(r=>t(null,r)).catch(t));d.promise=e=>{let t=d.resolveConfigPath(e),r=ye.promisify(x.readFile),n=ye.promisify(x.stat);return t?n(t).then(()=>r(t,"utf8")).then(o=>(e&&e.include===!0&&(o=je(o,j.resolve(j.dirname(t)))),we(o,e))):Promise.resolve(null)};d.sync=e=>{let t=d.resolveConfigPath(e);if(t&&x.existsSync(t)){let r=x.readFileSync(t,"utf8");if(e&&e.include===!0){let n=j.resolve(j.dirname(t));r=je(r,n)}return we(r,e)}return{}};d.resolveConfigPath=e=>{typeof e=="string"&&(e={type:e});let t=Object.assign({cwd:process.cwd()},e),r=t.path?Pe(t.path):He(t.type);return r?j.resolve(t.cwd,r):null};d.resolve=e=>d.resolveConfigPath(e);d.expandKeys=e=>{for(let t of Object.keys(e)){let r=/(\S+) "(.*)"/.exec(t);if(!r)continue;let n=r[1];e[n]=e[n]||{},e[n][r[2]]=e[t],delete e[t]}return e};function we(e,t){let r=Object.assign({},t);e=e.replace(/\[(\S+) "(.*)"\]/g,(o,i,s)=>i&&s?`[${i} "${s.split(".").join("\\.")}"]`:o);let n=Ye.parse(e);return r.expandKeys===!0?d.expandKeys(n):n}function je(e,t){let r=e.split(`
`).filter(i=>i.trim()!==""),n=r.length,o=[];for(let i=0;i<n;i++){let s=r[i];if(s.indexOf("[include]")===0){let l=r[i+1].replace(/^\s*path\s*=\s*/,""),a=j.resolve(t,Pe(l));o.push(x.readFileSync(a))}else o.push(s)}return o.join(`
`)}Ee.exports=d});var dt={};Re(dt,{default:()=>Fe});module.exports=Me(dt);var c=require("@raycast/api"),Ce=require("child_process"),m=require("fs"),N=C(ae()),ve=require("os"),Oe=C(Se()),z=require("path"),Te=require("react");var A=C(require("node:path"),1),Ae=C(require("node:os"),1),xe=Ae.default.homedir();function G(e){let t=A.default.normalize(e)+A.default.sep;return(t.startsWith(xe)?t.replace(xe+A.default.sep,`~${A.default.sep}`):t).slice(0,-1)}var u=require("react/jsx-runtime"),E=(0,c.getPreferenceValues)(),V=E.gitClientAppPath||"",Ze=(0,m.existsSync)(V),K=E.terminalAppPath||"",et=(0,m.existsSync)(K),L=E.build,_e={Code:"com.microsoft.VSCode","Code - Insiders":"com.microsoft.VSCodeInsiders",VSCodium:"com.visualstudio.code.oss"},tt=_e[L]??_e.Code,F=`${(0,ve.homedir)()}/Library/Application Support/${L}/User/globalStorage/alefragnani.project-manager`,be="vscode-remote://";function rt(){let e=it()||F,t=`${e}/projects.json`,r=[`${e}/projects_cache_git.json`,`${e}/projects_cache_any.json`],n=[];if((0,m.existsSync)(t)){let o=JSON.parse((0,m.readFileSync)(t).toString());n.push(...o)}return r.forEach(o=>{(0,m.existsSync)(o)&&JSON.parse((0,m.readFileSync)(o).toString()).forEach(({name:s,fullPath:l})=>{n.find(({rootPath:a})=>a===l)||n.push({name:s,rootPath:l,tags:[],enabled:!0})})}),E.hideProjectsWithoutTag&&(n=n.filter(({tags:o})=>Array.isArray(o)&&o.length)),n}function nt(e){return e?.reduce((t,r)=>(r.tags?.forEach(n=>{t.includes(n)||t.push(n)}),t.sort((n,o)=>n.toLowerCase().localeCompare(o.toLowerCase()))),[])}var ot=(e,t)=>e.filter(r=>t?r.tags?.find(n=>n===t):!0);function it(){let e=E.projectManagerDataPath;if(e&&(0,m.existsSync)(e)){let t=(0,m.lstatSync)(e);if(t.isDirectory())return e;if(t.isFile())return(0,z.dirname)(e)}}function st(e){return[...e].sort((r,n)=>r.name.localeCompare(n.name))}function ct(e){let t=new Map;return e.forEach(r=>{(r.tags?.length>0?r.tags:["[no tags]"]).forEach(o=>{let i=[];t.has(o)&&i.push(...t.get(o)||[]),i.push(r),t.set(o,i)})}),new Map([...t.entries()].sort())}function at(e){let t=ct(e),r=[];return t.forEach((n,o)=>{r.push((0,u.jsx)(c.List.Section,{title:o,children:n?.map((i,s)=>(0,u.jsx)(Le,{...i},i.rootPath+s))},o))}),r}function Fe(){let e=[],t=rt(),r=nt(t),[n,o]=(0,Te.useState)("");if(!t||t.length===0)return(0,u.jsx)(c.Detail,{markdown:`To use this extension, the Visual Studio Extension 
      [Project Manager](https://marketplace.visualstudio.com/items?itemName=alefragnani.project-manager)
       is required.`});let i=st(t);if(E.groupProjectsByTag&&!n){let l=at(i);e.push(...l)}else ot(i,n).forEach((l,a)=>{e.push((0,u.jsx)(Le,{...l},l.rootPath+a))});let s=l=>{o(l)};return(0,u.jsx)(c.List,{searchBarPlaceholder:"Search projects ...",searchBarAccessory:r.length?(0,u.jsxs)(c.List.Dropdown,{tooltip:"Tags filter",onChange:s,defaultValue:void 0,children:[(0,u.jsx)(c.List.Dropdown.Section,{children:(0,u.jsx)(c.List.Dropdown.Item,{title:"All Tags",value:""},"0")}),(0,u.jsx)(c.List.Dropdown.Section,{title:"Tags",children:r.map((l,a)=>(0,u.jsx)(c.List.Dropdown.Item,{title:l,value:l},"tag-"+a))})]}):null,children:e})}function Le({name:e,rootPath:t,tags:r}){let n=t,o=G(n),i=(0,z.dirname)(o);return(0,u.jsx)(c.List.Item,{title:e,subtitle:i,icon:{fileIcon:n},keywords:r,accessoryTitle:r?.join(", "),actions:(0,u.jsxs)(c.ActionPanel,{children:[(0,u.jsxs)(c.ActionPanel.Section,{children:[ft(n)?(0,u.jsx)(c.Action,{title:`Open in ${L} (Remote)`,icon:"command-icon.png",onAction:()=>{(0,Ce.exec)("code --remote "+pt(n)),(0,c.closeMainWindow)()}}):(0,u.jsx)(c.Action.Open,{title:`Open in ${L}`,icon:"command-icon.png",target:n,application:tt}),et&&(0,u.jsx)(c.Action,{title:"Open in Terminal",onAction:()=>{(0,N.default)(n,{app:{name:K,arguments:[n]}}),(0,c.closeMainWindow)()},icon:{fileIcon:K},shortcut:{modifiers:["cmd"],key:"t"}},"terminal"),Ze&&ut(n)&&(0,u.jsx)(c.Action,{title:"Open in Git client",onAction:()=>{(0,N.default)(n,{app:{name:V,arguments:[n]}}),(0,c.closeMainWindow)()},icon:{fileIcon:V},shortcut:{modifiers:["cmd"],key:"g"}},"git-client"),(0,u.jsx)(c.Action.ShowInFinder,{path:n}),(0,u.jsx)(c.Action.OpenWith,{path:n,shortcut:{modifiers:["cmd"],key:"o"}})]}),(0,u.jsxs)(c.ActionPanel.Section,{children:[(0,u.jsx)(c.Action.CopyToClipboard,{title:"Copy Name",content:e,shortcut:{modifiers:["cmd"],key:"."}}),(0,u.jsx)(c.Action.CopyToClipboard,{title:"Copy Path",content:o,shortcut:{modifiers:["cmd","shift"],key:"."}})]}),(0,u.jsx)(c.ActionPanel.Section,{children:(0,u.jsx)(c.Action.Trash,{paths:[n],shortcut:{modifiers:["ctrl"],key:"x"}})}),(0,u.jsx)(lt,{})]})})}function lt(){return c.environment.isDevelopment?(0,u.jsxs)(c.ActionPanel.Section,{title:"Development",children:[(0,u.jsx)(c.Action.Open,{title:"Open projects.json File in Code",icon:"command-icon.png",target:F,application:"Visual Studio Code"}),(0,u.jsx)(c.Action.ShowInFinder,{title:"Show projects.json File in Finder",path:F}),(0,u.jsx)(c.Action.CopyToClipboard,{title:"Copy projects.json File Path",content:F})]}):null}function ut(e){return!!Oe.default.sync({cwd:e,path:".git/config",expandKeys:!0}).core}function ft(e){return e.startsWith(be)}function pt(e){e=e.slice(be.length);let t=e.indexOf("/");return e.slice(0,t)+" "+e.slice(t)}0&&(module.exports={});
/*!
 * git-config-path <https://github.com/jonschlinkert/git-config-path>
 *
 * Copyright (c) 2015-present, Jon Schlinkert.
 * Licensed under the MIT License.
 */
/*!
 * parse-git-config <https://github.com/jonschlinkert/parse-git-config>
 *
 * Copyright (c) 2015-present, Jon Schlinkert.
 * Released under the MIT License.
 */
